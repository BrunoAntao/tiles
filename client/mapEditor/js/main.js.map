{"version":3,"sources":["webpack:///webpack/bootstrap c9550c12e8e7268aada2","webpack:///./dist/mapEditor/boot.js","webpack:///./dist/mapEditor/menu.js","webpack:///./dist/mapEditor/game.js","webpack:///./dist/mapEditor/rts.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;AC/DA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,gC;;;;;;;ACjRA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uDAAuD,oBAAoB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,gC;;;;;;;ACjEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B,4BAA4B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C,gCAAgC,aAAa;AAC7C;AACA,uBAAuB,sBAAsB;AAC7C,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,wCAAwC;AAChG;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,+B","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c9550c12e8e7268aada2","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar game_1 = require(\"./game\");\r\nvar Item = /** @class */ (function () {\r\n    function Item(type, color) {\r\n        if (type === void 0) { type = null; }\r\n        if (color === void 0) { color = null; }\r\n        this.type = type;\r\n        this.color = color;\r\n    }\r\n    return Item;\r\n}());\r\nexports.Item = Item;\r\nvar Game = /** @class */ (function (_super) {\r\n    __extends(Game, _super);\r\n    function Game() {\r\n        var _this = _super.call(this, 960, 540, Phaser.CANVAS, 'game', null, null, false, false) || this;\r\n        _this.state.add('Boot', bootState);\r\n        _this.state.add('Game', game_1.gameState);\r\n        _this.state.start('Boot');\r\n        return _this;\r\n    }\r\n    return Game;\r\n}(Phaser.Game));\r\nexports.Game = Game;\r\nvar bootState = /** @class */ (function (_super) {\r\n    __extends(bootState, _super);\r\n    function bootState() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    bootState.prototype.preload = function () {\r\n        this.load.json('tiles', 'client/assets/tiles.json');\r\n    };\r\n    bootState.prototype.create = function () {\r\n        this.game.canvas.style.position = 'relative';\r\n        this.state.start('Game');\r\n    };\r\n    bootState.prototype.update = function () {\r\n    };\r\n    return bootState;\r\n}(Phaser.State));\r\nexports.bootState = bootState;\r\nexports.global = {\r\n    selected: {\r\n        primary: new Item(),\r\n        secondary: new Item()\r\n    },\r\n    history: []\r\n};\r\nexports.socket = io();\r\nwindow.onload = function () {\r\n    var game = new Game();\r\n};\r\n//# sourceMappingURL=boot.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dist/mapEditor/boot.js\n// module id = 0\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar boot_1 = require(\"./boot\");\r\nvar Menu = /** @class */ (function (_super) {\r\n    __extends(Menu, _super);\r\n    function Menu(state, items) {\r\n        var _this = this;\r\n        var sideBar = state.add.graphics();\r\n        sideBar.beginFill(0x000000);\r\n        sideBar.lineStyle(1, 0xffffff, 1);\r\n        sideBar.drawRect(0, 0, 159, state.game.height - 1);\r\n        sideBar.endFill();\r\n        _this = _super.call(this, state.game, state.game.width - 160, 0, sideBar.generateTexture()) || this;\r\n        sideBar.destroy();\r\n        _this.fixedToCamera = true;\r\n        _this.state = state;\r\n        _this.items = state.game.add.group();\r\n        _this.delta = 0;\r\n        items.forEach(function (item, i) {\r\n            var tile = state.add.sprite(state.game.width - 160 + 64, state.game.height / 3 + 32 + i * 48, 'tile');\r\n            tile.tint = item.color;\r\n            tile.inputEnabled = true;\r\n            tile.events.onInputDown.add(function (tile) {\r\n                if (state.input.activePointer.leftButton.isDown) {\r\n                    boot_1.global.selected.primary = item;\r\n                    boot_1.global.history.push(item);\r\n                    if (boot_1.global.history.length > 5) {\r\n                        boot_1.global.history.shift();\r\n                    }\r\n                }\r\n                else {\r\n                    boot_1.global.selected.secondary = item;\r\n                    boot_1.global.history.push(item);\r\n                    if (boot_1.global.history.length > 5) {\r\n                        boot_1.global.history.shift();\r\n                    }\r\n                }\r\n            }, _this);\r\n            _this.items.add(tile);\r\n        });\r\n        window.addEventListener('mousewheel', function (e) {\r\n            if (e.deltaY < 0 && _this.delta > -(_this.items.length - 7)) {\r\n                _this.delta--;\r\n            }\r\n            if (e.deltaY > 0 && _this.delta < 0) {\r\n                _this.delta++;\r\n            }\r\n            var i = 0;\r\n            _this.items.forEach(function (item) {\r\n                item.y = 48 * _this.delta + state.game.height / 3 + 32 + i * 48;\r\n                i++;\r\n            }, _this);\r\n        });\r\n        _this.subBar = new subMenu(state, state.game.width - 160, 0, 160, state.game.height / 3);\r\n        _this.subSlot1 = new activeSlot(state, 1, 0);\r\n        _this.subSlot2 = new activeSlot(state, 2, 0);\r\n        state.add.existing(_this);\r\n        return _this;\r\n    }\r\n    Menu.prototype.update = function () {\r\n        var _this = this;\r\n        var i = 0;\r\n        this.items.forEach(function (item) {\r\n            item.y = _this.state.camera.y + 48 * _this.delta + _this.state.game.height / 3 + 32 + i * 48;\r\n            item.x = _this.state.camera.x + _this.state.game.width - 160 + 64;\r\n            i++;\r\n        }, this);\r\n        this.state.world.bringToTop(this.items);\r\n        this.state.world.bringToTop(this.subBar);\r\n        this.state.world.bringToTop(this.subBar.slots);\r\n        this.subSlot1.setColor(boot_1.global.selected.primary);\r\n        this.subSlot2.setColor(boot_1.global.selected.secondary);\r\n        this.state.world.bringToTop(this.subSlot1);\r\n        this.state.world.bringToTop(this.subSlot2);\r\n    };\r\n    return Menu;\r\n}(Phaser.Sprite));\r\nexports.Menu = Menu;\r\nvar subMenu = /** @class */ (function (_super) {\r\n    __extends(subMenu, _super);\r\n    function subMenu(state, x, y, width, height) {\r\n        var _this = this;\r\n        var subMenu = state.add.graphics();\r\n        subMenu.beginFill(0x000000);\r\n        subMenu.lineStyle(1, 0xffffff, 1);\r\n        subMenu.drawRect(0, 0, width - 1, height - 1);\r\n        subMenu.endFill();\r\n        _this = _super.call(this, state.game, x, y, subMenu.generateTexture()) || this;\r\n        subMenu.destroy();\r\n        _this.state = state;\r\n        _this.slots = new slotGroup(state);\r\n        state.game.add.existing(_this);\r\n        return _this;\r\n    }\r\n    return subMenu;\r\n}(Phaser.Sprite));\r\nexports.subMenu = subMenu;\r\nvar slotGroup = /** @class */ (function (_super) {\r\n    __extends(slotGroup, _super);\r\n    function slotGroup(state) {\r\n        var _this = _super.call(this, state.game) || this;\r\n        _this.state = state;\r\n        for (var i = 0; i < 5; i++) {\r\n            _this.add(new slot(_this.state, 0, i));\r\n        }\r\n        return _this;\r\n    }\r\n    return slotGroup;\r\n}(Phaser.Group));\r\nexports.slotGroup = slotGroup;\r\nvar slot = /** @class */ (function (_super) {\r\n    __extends(slot, _super);\r\n    function slot(state, x, i) {\r\n        var _this = this;\r\n        var slot = state.add.graphics();\r\n        slot.beginFill(0x000000);\r\n        slot.lineStyle(2, 0xffffff, 1);\r\n        slot.drawRect(0, 0, state.game.height / 3 / 7, state.game.height / 3 / 7);\r\n        slot.endFill();\r\n        _this = _super.call(this, state.game, state.game.width - 160 + 16 + (state.game.height / 3 / 7 + 16) * x, state.game.height / 3 / 7 + i * state.game.height / 3 / 7, slot.generateTexture()) || this;\r\n        slot.destroy();\r\n        _this.state = state;\r\n        _this.item = null;\r\n        _this.id = i;\r\n        _this.inputEnabled = true;\r\n        _this.events.onInputDown.add(function (slot) {\r\n            if (slot.state.input.activePointer.leftButton.isDown) {\r\n                boot_1.global.selected.primary = slot.item;\r\n            }\r\n            else if (slot.item) {\r\n                boot_1.global.selected.secondary = slot.item;\r\n            }\r\n        }, _this);\r\n        state.game.add.existing(_this);\r\n        return _this;\r\n    }\r\n    slot.prototype.setColor = function (item) {\r\n        if (item) {\r\n            var g = this.state.add.graphics();\r\n            g.beginFill(item.color);\r\n            g.lineStyle(2, 0xffffff, 1);\r\n            g.drawRect(0, 0, this.state.game.height / 3 / 7, this.state.game.height / 3 / 7);\r\n            g.endFill();\r\n            this.loadTexture(g.generateTexture());\r\n            g.destroy();\r\n        }\r\n    };\r\n    slot.prototype.update = function () {\r\n        this.item = boot_1.global.history[this.id];\r\n        this.setColor(this.item);\r\n    };\r\n    return slot;\r\n}(Phaser.Sprite));\r\nexports.slot = slot;\r\nvar activeSlot = /** @class */ (function (_super) {\r\n    __extends(activeSlot, _super);\r\n    function activeSlot(state, x, i) {\r\n        var _this = this;\r\n        var slot = state.add.graphics();\r\n        slot.beginFill(0x000000);\r\n        slot.lineStyle(2, 0xffffff, 1);\r\n        slot.drawRect(0, 0, state.game.height / 3 / 7, state.game.height / 3 / 7);\r\n        slot.endFill();\r\n        _this = _super.call(this, state.game, state.game.width - 160 + 16 + (state.game.height / 3 / 7 + 16) * x, state.game.height / 3 / 7 + i * state.game.height / 3 / 7, slot.generateTexture()) || this;\r\n        slot.destroy();\r\n        _this.state = state;\r\n        _this.inputEnabled = true;\r\n        state.game.add.existing(_this);\r\n        return _this;\r\n    }\r\n    activeSlot.prototype.setColor = function (item) {\r\n        if (item) {\r\n            var g = this.state.add.graphics();\r\n            g.beginFill(item.color);\r\n            g.lineStyle(2, 0xffffff, 1);\r\n            g.drawRect(0, 0, this.state.game.height / 3 / 7, this.state.game.height / 3 / 7);\r\n            g.endFill();\r\n            this.loadTexture(g.generateTexture());\r\n            g.destroy();\r\n        }\r\n    };\r\n    return activeSlot;\r\n}(Phaser.Sprite));\r\nexports.activeSlot = activeSlot;\r\nvar Popup = /** @class */ (function (_super) {\r\n    __extends(Popup, _super);\r\n    function Popup(state) {\r\n        var _this = _super.call(this, state.game) || this;\r\n        _this.elements = [];\r\n        state.add.existing(_this);\r\n        return _this;\r\n    }\r\n    Popup.prototype.add = function (elem) {\r\n        elem.setParent(this);\r\n        this.elements.push(elem);\r\n    };\r\n    return Popup;\r\n}(Phaser.Graphics));\r\nexports.Popup = Popup;\r\nvar textBox = /** @class */ (function () {\r\n    function textBox(submit) {\r\n        if (submit === void 0) { submit = null; }\r\n        var _this = this;\r\n        this.element = document.createElement('input');\r\n        this.element.style.position = 'absolute';\r\n        this.element.style.top = '25%';\r\n        this.element.style.left = '45%';\r\n        this.element.style.width = '10%';\r\n        this.parent = null;\r\n        this.submit = submit;\r\n        var a = function (e) {\r\n            _this.element.focus();\r\n            document.removeEventListener('keydown', a);\r\n        };\r\n        document.addEventListener('keydown', a);\r\n        this.element.addEventListener('keydown', function (e) {\r\n            if (e.key === 'Enter') {\r\n                _this.submit(_this.element);\r\n                _this.element.remove();\r\n                _this.parent.destroy();\r\n            }\r\n        });\r\n        document.body.appendChild(this.element);\r\n    }\r\n    textBox.prototype.setParent = function (parent) {\r\n        this.parent = parent;\r\n    };\r\n    return textBox;\r\n}());\r\nexports.textBox = textBox;\r\nvar selectBox = /** @class */ (function () {\r\n    function selectBox(items, submit) {\r\n        if (submit === void 0) { submit = null; }\r\n        var _this = this;\r\n        this.element = document.createElement('select');\r\n        this.element.style.position = 'absolute';\r\n        this.element.style.top = '25%';\r\n        this.element.style.left = '45%';\r\n        this.element.style.width = '10%';\r\n        this.element.multiple = false;\r\n        items.forEach(function (item) {\r\n            var a = document.createElement(\"option\");\r\n            a.text = item;\r\n            _this.element.options.add(a);\r\n        });\r\n        this.parent = null;\r\n        this.submit = submit;\r\n        this.element.addEventListener('keydown', function (e) {\r\n            if (e.key === 'Enter') {\r\n                _this.submit(_this.element);\r\n                _this.element.remove();\r\n                _this.parent.destroy();\r\n            }\r\n        });\r\n        document.body.appendChild(this.element);\r\n        this.element.focus();\r\n    }\r\n    selectBox.prototype.setParent = function (parent) {\r\n        this.parent = parent;\r\n    };\r\n    return selectBox;\r\n}());\r\nexports.selectBox = selectBox;\r\n//# sourceMappingURL=menu.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dist/mapEditor/menu.js\n// module id = 1\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar rts_1 = require(\"./rts\");\r\nvar menu_1 = require(\"./menu\");\r\nvar boot_1 = require(\"./boot\");\r\nvar gameState = /** @class */ (function (_super) {\r\n    __extends(gameState, _super);\r\n    function gameState() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.groundPoint = { x: 0, y: 0 };\r\n        _this.origDragPoint = null;\r\n        return _this;\r\n    }\r\n    gameState.prototype.preload = function () {\r\n        this.load.spritesheet('tile', '/client/assets/tile.png', 32, 32);\r\n        this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n        this.scale.align(true, true);\r\n        this.scale.setResizeCallback(function () {\r\n            this.scale.setMaximum();\r\n        }, this);\r\n        this.load.json('tiles', 'client/assets/tiles.json');\r\n    };\r\n    gameState.prototype.create = function () {\r\n        this.game.renderer.renderSession.roundPixels = true;\r\n        Phaser.Canvas.setImageRenderingCrisp(this.game.canvas);\r\n        this.game.canvas.oncontextmenu = function (e) { e.preventDefault(); };\r\n        this.stage.backgroundColor = \"#212121\";\r\n        this.ctrls = {\r\n            ctrl: this.input.keyboard.addKey(Phaser.Keyboard.CONTROL)\r\n        };\r\n        new rts_1.MapEditor(this, 10, 10);\r\n        var items = this.cache.getJSON('tiles');\r\n        boot_1.global.selected.primary = items[0];\r\n        boot_1.global.selected.secondary = null;\r\n        //socket.emit('capture', this.game.canvas.toDataURL());\r\n        new menu_1.Menu(this, items);\r\n    };\r\n    gameState.prototype.cameraDrag = function () {\r\n        if (this.input.activePointer.rightButton.isDown && this.ctrls.ctrl.isDown) {\r\n            if (this.origDragPoint) {\r\n                this.camera.x += this.origDragPoint.x - this.input.activePointer.position.x;\r\n                this.camera.y += this.origDragPoint.y - this.input.activePointer.position.y;\r\n            }\r\n            this.origDragPoint = this.input.activePointer.position.clone();\r\n        }\r\n        else {\r\n            this.origDragPoint = null;\r\n        }\r\n    };\r\n    gameState.prototype.update = function () {\r\n        this.cameraDrag();\r\n    };\r\n    return gameState;\r\n}(Phaser.State));\r\nexports.gameState = gameState;\r\n//# sourceMappingURL=game.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dist/mapEditor/game.js\n// module id = 2\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar boot_1 = require(\"./boot\");\r\nvar menu_1 = require(\"./menu\");\r\nvar DataMap = /** @class */ (function () {\r\n    function DataMap(width, height) {\r\n        if (width === void 0) { width = 10; }\r\n        if (height === void 0) { height = 10; }\r\n        this.width = width;\r\n        this.height = height;\r\n        this.data = new Array(width);\r\n        for (var x = 0; x < this.width; x++) {\r\n            this.data[x] = new Array(height);\r\n        }\r\n    }\r\n    return DataMap;\r\n}());\r\nvar Map = /** @class */ (function (_super) {\r\n    __extends(Map, _super);\r\n    function Map(state, data) {\r\n        if (data === void 0) { data = new DataMap(50, 50); }\r\n        var _this = _super.call(this, state.game) || this;\r\n        _this.data = data;\r\n        _this.state = state;\r\n        state.game.world.setBounds(0, 0, data.width * 32 + 160, data.height * 32);\r\n        return _this;\r\n    }\r\n    return Map;\r\n}(Phaser.Group));\r\nexports.Map = Map;\r\nvar MapEditor = /** @class */ (function (_super) {\r\n    __extends(MapEditor, _super);\r\n    function MapEditor(state, width, height) {\r\n        if (width === void 0) { width = 10; }\r\n        if (height === void 0) { height = 10; }\r\n        var _this = _super.call(this, state, new DataMap(width, height)) || this;\r\n        for (var x = 0; x < _this.data.width; x++) {\r\n            for (var y = 0; y < _this.data.height; y++) {\r\n                _this.add(new EditorTile(state.game, _this, x, y));\r\n            }\r\n        }\r\n        state.input.keyboard.addCallbacks(_this, function (e) {\r\n            if (e.key === 's') {\r\n                if (!_this.pop) {\r\n                    _this.pop = new menu_1.Popup(state);\r\n                    _this.pop.add(new menu_1.textBox(function (input) {\r\n                        boot_1.socket.emit('map save', { name: input.value, data: _this.save() });\r\n                        _this.pop = null;\r\n                    }));\r\n                }\r\n            }\r\n            else if (e.key === 'l') {\r\n                if (!_this.pop) {\r\n                    boot_1.socket.emit('fetch maplist');\r\n                }\r\n            }\r\n        });\r\n        var editor = _this;\r\n        boot_1.socket.on('maplist', function (maplist) {\r\n            editor.pop = new menu_1.Popup(state);\r\n            editor.pop.add(new menu_1.selectBox(maplist, function (select) {\r\n                boot_1.socket.emit('fetch map', select.selectedOptions[0].text);\r\n                editor.pop = null;\r\n            }));\r\n        });\r\n        boot_1.socket.on('map', function (map) {\r\n            var _this = this;\r\n            editor.clear();\r\n            map.data.forEach(function (r, x) {\r\n                r.forEach(function (tile, y) {\r\n                    if (tile) {\r\n                        var t = new Tile(state.game, _this, x, y);\r\n                        t.tint = tile;\r\n                        map.data[x][y] = t;\r\n                    }\r\n                });\r\n            });\r\n            editor.data = map;\r\n        });\r\n        return _this;\r\n    }\r\n    MapEditor.prototype.clear = function () {\r\n        this.data.data.forEach(function (x) {\r\n            x.forEach(function (tile) {\r\n                if (tile) {\r\n                    tile.destroy();\r\n                    tile = null;\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MapEditor.prototype.save = function () {\r\n        var exportData = new DataMap(this.data.width, this.data.height);\r\n        this.data.data.forEach(function (x) {\r\n            x.forEach(function (tile) {\r\n                if (tile) {\r\n                    exportData.data[tile.posX][tile.posY] = tile.tint;\r\n                }\r\n            });\r\n        });\r\n        return exportData;\r\n    };\r\n    return MapEditor;\r\n}(Map));\r\nexports.MapEditor = MapEditor;\r\nvar Tile = /** @class */ (function (_super) {\r\n    __extends(Tile, _super);\r\n    function Tile(game, map, x, y) {\r\n        var _this = _super.call(this, game, x, y, 'tile') || this;\r\n        _this.map = map;\r\n        _this.autoCull = true;\r\n        _this.posX = x;\r\n        _this.posY = y;\r\n        game.add.existing(_this);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Tile.prototype, \"posX\", {\r\n        get: function () {\r\n            return this.x / 32;\r\n        },\r\n        set: function (x) {\r\n            this.x = x * 32;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Tile.prototype, \"posY\", {\r\n        get: function () {\r\n            return this.y / 32;\r\n        },\r\n        set: function (y) {\r\n            this.y = y * 32;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Tile;\r\n}(Phaser.Sprite));\r\nexports.Tile = Tile;\r\nvar EditorTile = /** @class */ (function (_super) {\r\n    __extends(EditorTile, _super);\r\n    function EditorTile(game, map, x, y) {\r\n        var _this = _super.call(this, game, map, x, y) || this;\r\n        _this.alpha = 0.2;\r\n        _this.game = game;\r\n        _this.inputEnabled = true;\r\n        _this.events.onInputOver.add(function (tile) {\r\n            if (game.input.activePointer.isDown) {\r\n                tile.events.onInputDown.dispatch(tile);\r\n            }\r\n            tile.alpha = 0.5;\r\n        });\r\n        _this.events.onInputOut.add(function (tile) {\r\n            tile.alpha = 0.2;\r\n        });\r\n        _this.events.onInputDown.add(function (tile) {\r\n            if (game.input.activePointer.leftButton.isDown) {\r\n                if (map.data.data[tile.posX][tile.posY]) {\r\n                    map.data.data[tile.posX][tile.posY].destroy();\r\n                }\r\n                map.data.data[tile.posX][tile.posY] = new Tile(game, map, tile.posX, tile.posY);\r\n                map.data.data[tile.posX][tile.posY].tint = boot_1.global.selected.primary.color;\r\n            }\r\n            else if (!map.state.ctrls.ctrl.isDown) {\r\n                if (boot_1.global.selected.secondary) {\r\n                    if (map.data.data[tile.posX][tile.posY]) {\r\n                        map.data.data[tile.posX][tile.posY].destroy();\r\n                    }\r\n                    map.data.data[tile.posX][tile.posY] = new Tile(game, map, tile.posX, tile.posY);\r\n                    map.data.data[tile.posX][tile.posY].tint = boot_1.global.selected.secondary.color;\r\n                }\r\n                else {\r\n                    if (map.data.data[tile.posX][tile.posY]) {\r\n                        map.data.data[tile.posX][tile.posY].destroy();\r\n                        map.data.data[tile.posX][tile.posY] = null;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    EditorTile.prototype.update = function () {\r\n        if (!this.game.input.activePointer.withinGame) {\r\n            this.alpha = 0.2;\r\n        }\r\n    };\r\n    return EditorTile;\r\n}(Tile));\r\nexports.EditorTile = EditorTile;\r\n//# sourceMappingURL=rts.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dist/mapEditor/rts.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}